# Playwright DOM Extractor

A powerful tool for extracting DOM elements from web pages, generating semantic keys, and creating maintainable Playwright tests.

## Features

- **Extract DOM Elements**: Analyze web pages and extract elements for testing
- **Generate Semantic Keys**: Create consistent, meaningful selectors for elements
- **Smart Selector System**: Use partial keys, intelligent matching and context detection
- **Data-testid Prioritization**: Automatically use the most stable selectors
- **AI Integration**: Generate better keys with Cursor AI via MCP
- **Simplified Test Creation**: Create robust, maintainable Playwright tests

## Quick Start

```bash
# Clone the repository
git clone https://github.com/yourusername/playwright-dom-extractor.git
cd playwright-dom-extractor

# Install dependencies
npm ci

# Run a basic demo
node examples/dom-extraction-demo.js
```

## Demo Examples

The repository includes several demos in the `examples` directory:

```bash
# Basic DOM extraction
node examples/dom-extraction-demo.js

# Cursor MCP integration (AI-powered keys)
node examples/mcp-integration-demo.js

# Run the smart semantic selector demo
npx playwright test examples/essential-demo.spec.ts

# Interactive demo of the smart selector
node examples/run-smart-selector-demo.js
```

## Documentation

Refer to these documents for detailed information:

- **[SEMANTIC-KEYS.md](SEMANTIC-KEYS.md)**: Learn about the semantic key naming convention and generation
- **[SMART-SELECTOR.md](SMART-SELECTOR.md)**: Guide to using the smart selector capabilities
- **[BEST-PRACTICES.md](BEST-PRACTICES.md)**: Tips for implementing data-testid attributes
- **[MCP-INTEGRATION.md](MCP-INTEGRATION.md)**: Guide for Cursor AI integration
- **[CROSS-MACHINE-SETUP.md](CROSS-MACHINE-SETUP.md)**: Setup instructions for different environments

## Core Components

### DOM Monitor

```typescript
// Extract DOM elements from a page
const domMonitor = new DOMMonitor({
  outputPath: './mappings',
  useAI: false,       // Set to true to use AI for key generation
  useMCP: false,      // Set to true to use Cursor MCP
  featureName: 'login' // Optional context
});

// Usage with Playwright
const browser = await chromium.launch();
const context = await browser.newContext();
const page = await context.newPage();
await page.goto('https://example.com/login');

// Extract elements and generate keys
const elements = await domMonitor.extractDOMElements(page, context);
const elementsWithKeys = await domMonitor.generateSemanticKeys(elements, 'https://example.com/login');

// Save output to files (JSON, HTML)
await domMonitor.saveOutput(elementsWithKeys, 'https://example.com/login');
```

### Semantic Helper

```typescript
import { getSemanticSelector } from './utils/semantic-helper';

// Get a selector from a semantic key
const selector = await getSemanticSelector('login_button_submit');

// With feature context
const selector = await getSemanticSelector('button_submit', 'login');

// Smart/intelligent matching
const selector = await getSemanticSelector('submit login');
```

## Project Structure

```
playwright-dom-extractor/
├── examples/             # Demo examples and test files
│   ├── test-data/        # Example mapping data
│   └── test-html/        # HTML files for testing
├── mappings/             # Mapping files generated by DOM Monitor
├── services/             # Core services
├── utils/                # Utility functions
│   └── semantic-helper.ts # Smart selector implementation
└── .cursor/              # Cursor AI integration
    ├── prompts/          # AI prompts for element analysis
    └── rules/            # Coding rules for AI assistance
```

## License

[MIT](LICENSE)